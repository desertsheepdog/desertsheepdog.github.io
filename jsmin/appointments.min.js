"use strict";function displayCalendar(e){var t,a,n,d,l,r,o,c=new Date,s=["January","February","March","April","May","June","July","August","September","October","November","December"];-1===e?dateObject.setMonth(dateObject.getMonth()-1):1===e&&dateObject.setMonth(dateObject.getMonth()+1),r=dateObject.getMonth(),o=dateObject.getFullYear(),dateObject.setDate(1),a=dateObject.getDay(),l=s[r]+" "+o,document.querySelector("#calendar table caption").innerHTML=l,0===r||2===r||4===r||6===r||7===r||9===r||11===r?n=31:1===r?o%4==0?o%100==0?daysInMarch=o%400==0?29:28:n=29:n=28:n=30,d=document.getElementsByTagName("td");for(i=0;i<d.length;i++)d[i].innerHTML="",d[i].className="";if(1==calendar)for(i=a;i<n+a;i++)d[i].innerHTML=dateObject.getDate(),d[i].className="date",c>dateObject&&(d[i].className="pastdate"),t=dateObject.getDate()+1,dateObject.setDate(t);else if(2==calendar)for(var i=a;i<n+a;i++)d[i].innerHTML=dateObject.getDate(),d[i].className="date",c<dateObject&&(d[i].className="futuredate"),t=dateObject.getDate()+1,dateObject.setDate(t);dateObject.setMonth(dateObject.getMonth()-1),document.getElementById("calendar").style.display="block"}function selectCalendar(){1==calendar?(calendarInput="pastDate",displayCalendar()):2==calendar&&(calendarInput="apptDate",displayCalendar())}function pastCalendar(){calendarOpen||(calendarOpen=!0,calendar=1,selectCalendar())}function apptCalendar(){calendarOpen||(calendarOpen=!0,calendar=2,selectCalendar())}function selectDate(e){void 0===e&&(e=window.event);var t=e.target||e.srcElement;if(""===t.innerHTML)return document.getElementById("calendar").style.display="block",!1;dateObject.setDate(t.innerHTML);var a=new Date,n=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),d=Date.UTC(dateObject.getFullYear(),dateObject.getMonth(),dateObject.getDate());if(1==calendar){if(d>=n)return document.getElementById("calendar").style.display="block",!1}else if(2==calendar&&d<=n)return document.getElementById("calendar").style.display="block",!1;document.getElementById(calendarInput).value=dateObject.toLocaleDateString(),hideCalendar()}function hideCalendar(){document.getElementById("calendar").style.display="none",calendarOpen=!1}function prevMo(){displayCalendar(-1)}function nextMo(){displayCalendar(1)}function updateCounter(){var e=new Date,t=document.getElementById("pastDate").value,a=new Date(t),n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());n-a<864e5&&(document.getElementById("elapsedResults").style.display="none");var d=Math.ceil((n-a)/864e5);console.log("baseline = "+d+" days");var l=Math.floor(d/365.25);console.log("years from = "+l+" years");var r=Math.floor(d%365.25);console.log("year remainder =  "+r+" days");var o=Math.floor(r/30.44);if(console.log("months from = "+o+" months"),0==l&&0==o)s=r-o;else{var c=r/30.44%o;console.log("months remainder = "+c+" days");var s=Math.floor(30.44*c)}console.log("days from =  "+s+" days"),document.getElementById("elapsedResults").innerHTML=l+" year(s) ",document.getElementById("elapsedResults").innerHTML+=o+" month(s) ",document.getElementById("elapsedResults").innerHTML+=s+" day(s) ",document.getElementById("elapsedResults").style.color="black",document.getElementById("elapsedResults").style.display="block"}function updateCountdown(){var e=new Date,t=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),a=Date.UTC(dateObject.getFullYear(),dateObject.getMonth(),dateObject.getDate());a-t<864e5&&(document.getElementById("apptResults").style.display="none"),document.getElementById("apptResults").style.display="block";var n=Math.ceil((a-t)/864e5);console.log("baseline = "+n+" days");var d=Math.floor(n/365.25);console.log("years from = "+d+" years");var l=Math.floor(n%365.25);console.log("year remainder =  "+l+" days");var r=Math.floor(l/30.44);if(console.log("months from = "+r+" months"),0==d&&0==r)c=l-r;else{var o=l/30.44%r;console.log("months remainder = "+o+" days");var c=Math.floor(30.44*o)}console.log("days from =  "+c+" days"),document.getElementById("apptCount").innerHTML="Countdown: "+d+" year(s) ",document.getElementById("apptCount").innerHTML+=r+" month(s) ",document.getElementById("apptCount").innerHTML+=c+" day(s) "}function validateApptForm(){var e,t=document.querySelectorAll("#apptForm input"),a=!0,n=t.length;try{for(var d=0;d<n;d++)""===(e=t[d]).value?(e.style.background="rgb(255, 225, 225)",a=!1):e.style.background="rgb(125, 125, 125)";if(!a)throw"Please complete all fields";if(!firstNameValidity)throw"Please correct first name";if(!lastNameValidity)throw"Please correct last name";if(!apptDateValidity)throw"Please correct appointment date";apptText.style.color="black",apptText.innerHTML="",apptText.style.display="none",addName()}catch(e){apptText.style.color="red",apptText.style.display="block",apptText.innerHTML=e}}function addName(){var e=new Date;appointment.client.firstName=document.getElementById("firstName").value,appointment.client.lastName=document.getElementById("lastName").value,appointment.date=document.getElementById("apptDate").value,document.getElementById("apptName").innerHTML="Name: "+appointment.client.firstName+" "+appointment.client.lastName,document.getElementById("apptBookedFor").innerHTML="Appointment date: "+appointment.date,document.getElementById("apptBookedOn").innerHTML="Booked on: "+e.toString(),updateCountdown(),document.getElementById("firstName").value="",document.getElementById("lastName").value="",document.getElementById("apptDate").value=""}function validateFirstName(){var e=document.getElementById("firstName"),t=document.getElementById("apptText");try{if(""===e.value)throw"First name is required.";if(!0===/[*.\W\d]/.test(e.value))throw"First name can only contain alphabetical characters.";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML="",firstNameValidity=!0}catch(a){e.style.background="rgb(255, 200, 200)",t.style.display="block",t.style.color="red",t.innerHTML=a,firstNameValidity=!1}}function validateLastName(){var e=document.getElementById("lastName"),t=document.getElementById("apptText");try{if(""===e.value)throw"Last name is required.";if(!0===/[*.\W\d]/.test(e.value))throw"Last name can only contain alphabetical characters.";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML="",lastNameValidity=!0}catch(a){e.style.background="rgb(255, 200, 200)",t.style.display="block",t.style.color="red",t.innerHTML=a,lastNameValidity=!1}}function validateApptDate(){var e=document.getElementById("apptDate"),t=document.getElementById("apptText"),a=/(0?\d{1}|1[0-2])\/([0-2]?\d{1}|3[0-1])\/(19|20)\d{2}/;try{if(""===e.value)throw"Appointment date is required.";if(!1===a.test(e.value))throw"Date must be valid format, mm/dd/yyyy";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML="",apptDateValidity=!0}catch(a){e.style.background="rgb(255, 200, 200)",t.style.display="block",t.style.color="red",t.innerHTML=a,apptDateValidity=!1}}function validatePastDate(){var e=document.getElementById("pastDate"),t=document.getElementById("elapsedResults"),a=/(0?\d{1}|1[0-2])\/([0-2]?\d{1}|3[0-1])\/\d{4}/;try{if(""===e.value)throw"Appointment date is required.";if(!1===a.test(e.value))throw"Date must be valid format, mm/dd/yyyy";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML="",updateCounter()}catch(a){e.style.background="rgb(255, 200, 200)",t.style.display="block",t.style.color="red",t.innerHTML=a}}function createNewEventListeners(){var e=document.getElementById("firstName"),t=document.getElementById("lastName"),a=document.getElementById("apptDate");e.addEventListener?(e.addEventListener("change",validateFirstName,!1),t.addEventListener("change",validateLastName,!1),a.addEventListener("change",validateApptDate,!1)):usernameInput.attachEvent&&(e.attachEvent("onchange",validateFirstName),t.attachEvent("onchange",validateLastName),a.attachEvent("onchange",validateApptDate))}function createEventListeners(){var e=document.getElementById("calendarButton");e.addEventListener?e.addEventListener("click",pastCalendar,!1):e.attachEvent&&e.attachEvent("onclick",pastCalendar),(e=document.getElementById("apptDate")).addEventListener?e.addEventListener("click",apptCalendar,!1):e.attachEvent&&e.attachEvent("onclick",apptCalendar);var t=document.getElementsByTagName("td");if(t[0].addEventListener)for(a=0;a<t.length;a++)t[a].addEventListener("click",selectDate,!1);else if(t[0].attachEvent)for(var a=0;a<t.length;a++)t[a].attachEvent("onclick",selectDate);var n=document.getElementById("close");n.addEventListener?n.addEventListener("click",hideCalendar,!1):n.attachEvent&&n.attachEvent("onclick",hideCalendar);var d=document.getElementById("prev"),l=document.getElementById("next");d.addEventListener?(d.addEventListener("click",prevMo,!1),l.addEventListener("click",nextMo,!1)):d.attachEvent&&(d.attachEvent("onclick",prevMo),l.attachEvent("onclick",nextMo));var r=document.getElementById("apptButton");r.addEventListener?r.addEventListener("click",validateApptForm,!1):r.attachEvent&&r.attachEvent("onclick",validateApptForm),(r=document.getElementById("elapsedButton")).addEventListener?r.addEventListener("click",validatePastDate,!1):r.attachEvent&&r.attachEvent("onclick",validatePastDate)}var calendarOpen=!1,calendar,calendarInput,elapsedTime,apptValidity=!0,pastValidity=!0,dateObject=new Date,appointment={date:"",client:{firstName:"",lastName:""}},firstNameValidity=!0,lastNameValidity=!0,apptDateValidity=!0;window.addEventListener?window.addEventListener("load",createNewEventListeners,!1):window.attachEvent&&window.attachEvent("onload",createNewEventListeners),window.addEventListener?window.addEventListener("load",createEventListeners,!1):window.attachEvent&&window.attachEvent("onload",createEventListeners);