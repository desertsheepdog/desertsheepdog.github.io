"use strict";function calculateAmount(){totalCost=0;var e=0;do{itemQuantity[e]=document.getElementById("item_"+(e+1)).value,e++}while(e<7);for(e=0;e<7;)itemTotal[e]=itemQuantity[e]*itemPrice[e],totalCost+=itemTotal[e],e++;document.getElementById("grandTotal").innerHTML="$"+totalCost}function toggleShipping_1(){!1===document.getElementById("shipping_1").checked?totalCost-=shippingPrice[0]:totalCost+=shippingPrice[0],!0===document.getElementById("shipping_2").checked&&(document.getElementById("shipping_2").checked=!1,totalCost-=shippingPrice[1]),!0===document.getElementById("shipping_3").checked&&(document.getElementById("shipping_3").checked=!1,totalCost-=shippingPrice[2]),document.getElementById("grandTotal").innerHTML="$"+totalCost}function toggleShipping_2(){!1===document.getElementById("shipping_2").checked?totalCost-=shippingPrice[1]:totalCost+=shippingPrice[1],!0===document.getElementById("shipping_1").checked&&(document.getElementById("shipping_1").checked=!1,totalCost-=shippingPrice[0]),!0===document.getElementById("shipping_3").checked&&(document.getElementById("shipping_3").checked=!1,totalCost-=shippingPrice[2]),document.getElementById("grandTotal").innerHTML="$"+totalCost}function toggleShipping_3(){!1===document.getElementById("shipping_3").checked?totalCost-=shippingPrice[2]:totalCost+=shippingPrice[2],!0===document.getElementById("shipping_1").checked&&(document.getElementById("shipping_1").checked=!1,totalCost-=shippingPrice[0]),!0===document.getElementById("shipping_2").checked&&(document.getElementById("shipping_2").checked=!1,totalCost-=shippingPrice[1]),document.getElementById("grandTotal").innerHTML="$"+totalCost}function verifyItem_1(){var e=!1,t="";try{if(item_1.value<0)throw e=!0,"You cannot enter a negative quatity."}catch(e){t=e,item_1.value=0}finally{e&&(alert(t),recalculateAmount())}}function verifyItem_2(){var e=!1,t="";try{if(item_2.value<0)throw e=!0,"You cannot enter a negative quatity."}catch(e){t=e,item_2.value=0}finally{e&&(alert(t),recalculateAmount())}}function verifyItem_3(){var e=!1,t="";try{if(item_3.value<0)throw e=!0,"You cannot enter a negative quatity."}catch(e){t=e,item_3.value=0}finally{e&&(alert(t),recalculateAmount())}}function verifyItem_4(){var e=!1,t="";try{if(item_4.value<0)throw e=!0,"You cannot enter a negative quatity."}catch(e){t=e,item_4.value=0}finally{e&&(alert(t),recalculateAmount())}}function verifyItem_5(){var e=!1,t="";try{if(item_5.value<0)throw e=!0,"You cannot enter a negative quatity."}catch(e){t=e,item_5.value=0}finally{e&&(alert(t),recalculateAmount())}}function verifyItem_6(){var e=!1,t="";try{if(item_6.value<0)throw e=!0,"You cannot enter a negative quatity."}catch(e){t=e,item_6.value=0}finally{e&&(alert(t),recalculateAmount())}}function verifyItem_7(){var e=!1,t="";try{if(item_7.value<0)throw e=!0,"You cannot enter a negative quatity."}catch(e){t=e,item_7.value=0}finally{e&&(alert(t),recalculateAmount())}}function verifyItems(){verifyItem_1(),verifyItem_2(),verifyItem_3(),verifyItem_4(),verifyItem_5(),verifyItem_6(),verifyItem_7()}function clearSelectDefaults(){document.getElementsByTagName("select")[0].selectedIndex=-1}function autoCheckSpecial(){var e=document.getElementById("specialBox");""!==e.value&&e.value!==e.placeholder?document.getElementById("specialInstruct").checked=!0:document.getElementById("specialInstruct").checked=!1}function validateSupplies(){var e=document.querySelectorAll("#supplies input"),t=e.length,n=0;try{for(var a=0;a<t;a++)n+=e[a].value;if(0==n)throw"You have not selected any items for purchase.";suppliesError.style.display="none",suppliesError.innerHTML=""}catch(e){suppliesError.style.background="rgb(255, 200, 200)",suppliesError.style.display="block",suppliesError.innerHTML=e,formValidity=!1}}function validateShippingMethod(){var e=document.querySelectorAll("#shipMethod input"),t=e.length,n=[t];try{for(var a=0;a<t;a++)n[a]=e[a].checked;if(!(n[0]||n[1]||n[2]))throw"You have not selected a shipping method.";shipError.style.display="none",shipError.innerHTML=""}catch(e){shipError.style.background="rgb(255, 200, 200)",shipError.style.display="block",shipError.innerHTML=e,formValidity=!1}}function validateShippingInfo(){var e,t=document.querySelectorAll("#shipInfo input"),n=!0,a=t.length;try{for(var i=0;i<a;i++)""===(e=t[i]).value?(e.style.background="rgb(255, 200, 200)",n=!1):e.style.background="rgb(125, 125, 125)";if(e=document.querySelector("#shipInfo select"),-1===e.selectedIndex?(e.style.border="1px solid red",n=!1):e.style.border="",e=document.getElementById("specialBox"),!document.getElementById("specialInstruct").checked||""!==e.value&&e.value!==e.placeholder?e.style.background="rgb(125, 125, 125)":(e.style.background="rgb(255, 200, 200)",n=!1),!n)throw"Please complete all shipping information fields.";shipInfoError.style.display="none",shipInfoError.innerHTML=""}catch(e){shipInfoError.style.background="rgb(255, 200, 200)",shipInfoError.style.display="block",shipInfoError.innerHTML=e,formValidity=!1}}function validateForm(e){e.preventDefault?e.preventDefault():e.returnValue=!1,formValidity=!0,validateSupplies(),validateShippingMethod(),validateShippingInfo(),validateFirstName(),validateLastName(),validateStreet(),validateCity(),validateZIP(),validateSpecialBox(),!0===formValidity?(document.getElementById("errorMessage").innerHTML="",document.getElementById("errorMessage").style.display="none",alert("Thank you for your order!"),document.getElementsByTagName("form")[0].submit()):(document.getElementById("errorMessage").innerHTML="This form is not complete, please check all fields for completion.",document.getElementById("errorMessage").style.display="block",document.getElementById("errorMessage").style.background="rgb(255, 200, 200)")}function validateUsername(){var e=document.getElementById("info1"),t=document.getElementById("info1warning");try{if(!1===/^.{4,12}$/.test(e.value))throw"Username must be at least 4-12 characters long.";if(!0===/\W/.test(e.value))throw"Username must only contain letters and numbers";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML="",account.username=e.value,usernameComplete=!0}catch(n){e.style.background="rgb(255, 220, 220)",t.style.display="block",t.innerHTML=n,usernameComplete=!1}}function validatePassword1(){var e=document.getElementById("info2"),t=document.getElementById("info2warning");try{if(!1===/.{12,}/.test(e.value))throw"Password must be at least 12 characters long.";if(!1===/[a-z]/.test(e.value))throw"Password must contain at least 1 lower case letter.";if(!1===/[A-Z]/.test(e.value))throw"Password must contain at least 1 upper case letter.";if(!1===/\d/.test(e.value))throw"Password must contain at least 1 number";if(!1===/[!@#_\-\$\.]/.test(e.value))throw"Password must contain at least one of the following symbols: ! @ # _  - $  .";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML=""}catch(n){e.style.background="rgb(255, 220, 220)",t.style.display="block",t.innerHTML=n}}function validatePassword2(){var e=document.getElementById("info2"),t=document.getElementById("info3"),n=document.getElementById("info3warning");try{if(0!==e.value.localeCompare(t.value))throw"Passwords do not match.";e.style.background="rgb(125, 125, 125)",t.style.background="rgb(125, 125, 125)",n.style.display="none",n.innerHTML="",account.password=e.value,passwordComplete=!0}catch(a){e.style.background="rgb(255, 220, 220)",t.style.background="rgb(255, 220, 220)",n.style.display="block",n.innerHTML=a,passwordComplete=!1}}function validateEmail(){var e=document.getElementById("info4"),t=document.getElementById("info4warning"),n=/^[_\w\-]+(\.[_\w\-]+)*@[\w\-]+(\.[\w\-]+)*(\.[\D]{2,6})$/;try{if(!1===n.test(e.value))throw"Invalid email format.";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML="",account.email=e.value,emailComplete=!0}catch(n){e.style.background="rgb(255, 220, 220)",t.style.display="block",t.innerHTML=n,emailComplete=!1}}function selectionAppend(e){void 0===e&&(e=window.event);var t=e.target||e.srcElement,n=t.value;if(t.checked){selection.push(n);var a=document.createElement("p");a.innerHTML=n,document.getElementById("selection").appendChild(a)}else for(var i=document.querySelectorAll("#selection p"),r=0;i.length;r++)if(i[r].innerHTML===n){selection.splice(r,1),i[r].parentNode.removeChild(i[r]);break}}function submitInfo(){if(usernameComplete&&passwordComplete&&emailComplete){var e=selection.toString(),t=JSON.stringify(account);document.getElementById("username").innerHTML=account.username,document.getElementById("email").innerHTML=account.email,document.getElementById("accountDisplay").style.display="block",document.getElementById("writeString").innerHTML=e,document.getElementById("writeJSON").innerHTML=t;for(n=1;n<=4;n++)document.getElementById("info"+n).value="";for(var n=1;n<=6;n++)document.getElementById("check"+n).checked=!1}}function validateFirstName(){var e=document.getElementById("firstName"),t=document.getElementById("shipInfoError");try{if(""===e.value)throw"First name is required.";if(!0===/[*.\W\d]/.test(e.value))throw"First name can only contain alphabetical characters.";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML="",account.username=e.value}catch(n){e.style.background="rgb(255, 200, 200)",t.style.display="block",t.style.background="rgb(255, 200, 200)",t.innerHTML=n,formValidity=!1}}function validateLastName(){var e=document.getElementById("lastName"),t=document.getElementById("shipInfoError");try{if(""===e.value)throw"Last name is required.";if(!0===/[*.\W\d]/.test(e.value))throw"Last name can only contain alphabetical characters.";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML="",account.username=e.value}catch(n){e.style.background="rgb(255, 200, 200)",t.style.display="block",t.style.background="rgb(255, 200, 200)",t.innerHTML=n,formValidity=!1}}function validateStreet(){var e=document.getElementById("street"),t=document.getElementById("shipInfoError");try{if(""===e.value)throw"Street address is required.";if(!1===/[a-zA-Z0-9.'-]/.test(e.value))throw"Illegal character(s) used.";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML="",account.username=e.value}catch(n){e.style.background="rgb(255, 200, 200)",t.style.display="block",t.style.background="rgb(255, 200, 200)",t.innerHTML=n,formValidity=!1}}function validateCity(){var e=document.getElementById("city"),t=document.getElementById("shipInfoError");try{if(""===e.value)throw"City is required.";if(!0===/[*.\W\d]/.test(e.value))throw"City can only contain alphabetical characters.";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML="",account.username=e.value}catch(n){e.style.background="rgb(255, 200, 200)",t.style.display="block",t.style.background="rgb(255, 200, 200)",t.innerHTML=n,formValidity=!1}}function validateZIP(){var e=document.getElementById("zip"),t=document.getElementById("shipInfoError");try{if(""===e.value)throw"ZIP code is required.";if(!1===/\d\-?/.test(e.value))throw"ZIP code can only contain numbers and '-' character";if(!1===/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(e.value))throw"Invalid Zip code format.";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML="",account.username=e.value}catch(n){e.style.background="rgb(255, 200, 200)",t.style.display="block",t.style.background="rgb(255, 200, 200)",t.innerHTML=n,formValidity=!1}}function validateSpecialBox(){var e=document.getElementById("specialBox"),t=document.getElementById("shipInfoError");document.getElementById("specialInstruct");try{if(!1===/^.{0,200}$/.test(e.value))throw"Special Instructions cannot be greater than 200 characters.";if(!0===/[^*.\w\,\.\?]/.test(e.value))throw"Special Instructions can only contain alphanumeric and , . ? characters.";e.style.background="rgb(125, 125, 125)",t.style.display="none",t.innerHTML="",account.username=e.value}catch(n){e.style.background="rgb(255, 200, 200)",t.style.display="block",t.style.background="rgb(255, 200, 200)",t.innerHTML=n,formValidity=!1}}function formReset(){for(e=1;e<=7;e++)document.getElementById("item_"+e).value=0;for(var e=1;e<=3;e++)document.getElementById("shipping_"+e).checked=!1;calculateAmount(),createEventListeners()}function functionLoader(){formReset(),createEventListeners(),clearSelectDefaults()}function createEventListeners(){for(l=1;l<=7;l++)document.getElementById("item_"+l).addEventListener("change",calculateAmount,!1);document.getElementById("shipping_1").addEventListener("change",toggleShipping_1,!1),document.getElementById("shipping_2").addEventListener("change",toggleShipping_2,!1),document.getElementById("shipping_3").addEventListener("change",toggleShipping_3,!1);for(l=1;l<=7;l++)document.getElementById("item_"+l).addEventListener("change",verifyItems,!1);for(l=1;l<=7;l++)document.getElementById("item_"+l).addEventListener("change",calculateAmount,!1);var e=document.getElementById("specialBox");e.addEventListener?e.addEventListener("blur",autoCheckSpecial,!1):e.attachEvent&&e.atachEvent("onblur",autoCheckSpecial);var t=document.getElementsByTagName("form")[1];t.addEventListener?t.addEventListener("submit",validateForm,!1):t.attachEvent&&t.attachEvent("onsubmit",validateForm);var n=document.getElementById("info1"),a=document.getElementById("info2"),i=document.getElementById("info3"),r=document.getElementById("info4");n.addEventListener?(n.addEventListener("change",validateUsername,!1),a.addEventListener("change",validatePassword1,!1),i.addEventListener("change",validatePassword2,!1),r.addEventListener("change",validateEmail,!1)):n.attachEvent&&(n.attachEvent("onchange",validateUsername),a.attachEvent("onchange",validatePassword1),i.attachEvent("onchange",validatePassword2),r.attachEvent("onchange",validateEmail));var o=document.getElementsByName("choices");if(o[0].addEventListener)for(l=0;l<o.length;l++)o[l].addEventListener("change",selectionAppend,!1);else if(o[0].attachEvent)for(var l=0;l<o.length;l++)o[l].attachEvent("onchange",selectionAppend);var c=document.getElementById("accountSubmit");c.addEventListener?c.addEventListener("click",submitInfo,!1):c.attachEvent&&c.attachEvent("onclick",submitInfo);var d=document.getElementById("firstName"),s=document.getElementById("lastName"),u=document.getElementById("street"),m=document.getElementById("city"),g=document.getElementById("zip"),y=document.getElementById("specialBox");d.addEventListener?(d.addEventListener("change",validateFirstName,!1),s.addEventListener("change",validateLastName,!1),u.addEventListener("change",validateStreet,!1),m.addEventListener("change",validateCity,!1),g.addEventListener("change",validateZIP,!1),y.addEventListener("change",validateSpecialBox,!1)):n.attachEvent&&(d.attachEvent("onchange",validateFirstName),s.attachEvent("onchange",validateLastName),u.attachEvent("onchange",validateStreet),m.attachEvent("onchange",validateCity),g.attachEvent("onchange",validateZIP),y.attachEvent("onchange",validateSpecialBox))}var shippingPrice=[5,10,15],itemPrice=[20,20,15,15,5,5,10],itemTotal=[7],itemQuantity=[7],totalCost=0,formValidity=!0,account={},selection=[],usernameComplete=!1,passwordComplete=!1,emailComplete=!1;window.addEventListener?window.addEventListener("load",functionLoader,!1):window.attachEvent&&window.attachEvent("onload",functionLoader);